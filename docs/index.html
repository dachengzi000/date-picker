<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
  <meta charset="UTF-8">
  <title>实战：手机日历组件</title>
  <meta name="keywords" content="前端,组件,webpack,babel,stylus,gulp">
  <meta name="description" content="我已经在 SegmentFault 上开设四个话题，都是针对特定知识点进行讲解，我觉得是时候来场完整项目实战了！这次选择讲解开发一个主攻移动设备网页的日历选择控件，重点在于完整重现整个开发过程。学完整个课程的同学可以对现代化前端开发有更全面的理解。">
  <meta name="author" content="Meathill <meathill@gmail.com>">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="//cdn.staticfile.org/reveal.js/3.4.1/css/reveal.min.css">
  <link rel="stylesheet" href="//cdn.staticfile.org/reveal.js/3.4.1/css/theme/moon.min.css">
  <link rel="stylesheet" href="//cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/darcula.min.css">
  <link rel="stylesheet" href="//meathill-lecture.github.io/box-flex-grid/css/meathill-reveal-theme.min.css">
  <link href="//fonts.lug.ustc.edu.cn/css?family=Source+Code+Pro" rel="stylesheet">
  <link rel="stylesheet" href="./css/screen.css">
</head>
<body>
<div class="reveal">
  <div class="slides">
    <section><h2 id="-">实战</h2><h1 id="-">手机日历组件</h1><h4 id="-meathill-https-weibo-com-meathill-"><a href="https://weibo.com/meathill/">@meathill</a></h4></section><section><section><h2>关于作者</h2></section><section><p><img src="http://qiniu.meathill.com/wp-content/uploads/2016/07/20160607_005422423_iOS-825x510.jpg" height="400" class="author-avatar"></p><p>大家好，我是翟路佳。全栈工程师，编程爱好者。</p></section><section><p>经常出没于：</p><ul><li><a href="http://blog.meathill.com">博客：http://blog.meathill.com</a></li><li><a href="http://weibo.com/meathill">微博：https://weibo.com/meathill/</a></li></ul></section></section><section><section><h2 id="-">课程大纲</h2><ol><li>项目启动 &amp; 需求分析</li><li>npm &amp; package.json</li><li>Stylus</li><li>静态 HTML 开发</li></ol></section><section><ol><li>Webpack + Babel 配置</li><li>使用 ES6 开发 JavaScript</li><li>使用 Mocha + should.js 测试</li></ol></section><section><ol><li>使用 Handlebars 处理模板</li><li>完成 UI 开发和测试</li><li>使用策略模式解决分支需求</li></ol></section><section><ol><li>Gulp 打包</li><li>配置 Webpack 适应不同环境的打包</li><li>使用 Weinre 解决微信下的问题</li></ol></section><section><ol><li>使用 GitHub Pages 搭建文档网站</li><li>回顾，总结</li></ol></section></section><section><h2 id="-">教学目标</h2><p>通过学习本系列教程，可以了解现代化前端开发的方方面面：</p><ol><li>学会搭建开发环境，使用 Webpack、Babel、Stylus、Gulp 等工具</li><li>了解测试驱动开发，学会写测试用例、自动化测试</li><li>学会打包发布代码</li><li>学会用 GitHub Pages 维护产品文档</li><li>学会写类似的组件</li></ol></section><section><h2 id="-">第一讲</h2><ol><li>项目启动 &amp; 需求分析</li><li>技术选型</li><li>流程图</li><li>[实战] 初始化项目</li><li>[实战] 开发静态 HTML</li></ol></section><section><section><h2 id="-">需求分析</h2></section><section><div class="row"><div class="col"><img src="./img/sample.png" alt="例子"></div><div class="col" markdown="1"><ol><li>开发一个日历控件</li><li>主要在手机浏览器中使用，包括公众号</li><li>点击日期输入框，弹出控件，选择日期，收起控件</li><li>尽量独立，少依赖，少引入框架</li><li>样式如图</li></ol></div></div></section><section><h3 id="-">通用规则</h3><ol><li>今日用黄点标记</li><li>不可选的日期为灰色</li><li>打开关闭都需要动画</li><li>周末用橙色标记</li><li>可以指定某个日期为橙色（端午节、清明节等）</li><li>向上滚屏可以自动增加下个月</li><li>可以用参数配置</li></ol></section><section><h3 id="-">选择单日</h3><ol><li>点击日期视为选中</li><li>点击同一日期视为取消</li><li>点击其它日期视为多选</li><li>若自动提交，点够数量就提交</li><li>不自动提交，右上角有提交按钮，点击后提交</li></ol></section><section><h3 id="-">选择多日</h3><ol><li>第一次点击时，视为选择时间段的一端，第二次点击为选择另一端</li><li>允许用户先选择终点，再选择起点</li><li>若自动提交，第二次点击后，控件伴随着动画关闭</li><li>不自动提交，第三次点击会清空之前的选择，并重新选择起点</li></ol></section></section><section><section><h2 id="-">技术选型</h2><ol><li>开发效率</li><li>使用效率</li><li>维护成本</li></ol></section><section><h3 id="jquery">jQuery</h3><ol><li>事件代理</li><li>创建 DOM</li><li>简单的 DOM 操作</li></ol></section><section><h3 id="-handlebars">模板引擎 Handlebars</h3><ol><li>预编译</li><li>比较熟</li></ol></section><section><h3 id="stylus-css">Stylus -&gt; CSS</h3><ol><li>使用预处理工具，方便开发</li><li>简单方便快捷，基于 Node.js</li><li>支持变量、函数、循环</li><li>丰富的内建函数</li></ol></section><section><h3 id="-">语言</h3><ol><li>ES6 Class</li><li>Webpack + Babel</li><li>完整的测试用例</li></ol></section><section><h3 id="-">提交物料</h3><ol><li>最终文件 CSS、JS 各一个</li><li>源代码</li><li>使用文档</li></ol></section></section><section><h2 id="-">这套方案的优势</h2><ol><li>使用比较简单，嵌入资源文件即可</li><li>使用 jQuery，前后兼容性好，对方容易接手</li><li>源代码保持最大的弹性，方便扩展开发</li></ol></section><section><section><h2 id="-">工作流程</h2><ol><li>将事件绑定在 <code>&lt;body&gt;</code> 上</li><li>配置信息使用 <code>data-*</code> 写在 <code>&lt;input&gt;</code> 上</li><li>用户点击 <code>input[type=text].tqb-date-picker</code> 后<ol><li>如果此文本框尚无日历元素</li><li>则生成一个元素并绑定</li></ol></li><li>弹出日历窗口</li><li>用户点击后选中日期</li></ol></section><section><p><img src="./img/flow.svg" alt="日历组件流程图"></p></section></section><section><h2 id="-">开工！！</h2></section><section><h2 id="0-">0. 准备阶段</h2><ol><li>安装 node.js</li><li>安装 Stylus</li></ol></section><section><section><h2 id="1-">1. 初始化项目</h2></section><section><h3 id="npm">NPM</h3><p>Node Package Manager = Node 包管理工具</p><ol><li>管理依赖</li><li>发布我们自己的包</li><li>记录常用脚本</li></ol></section><section><h3 id="package-json">package.json</h3><p>此项目的配置信息，可被 NPM 读取。</p><ol><li>版本、内容、作者等描述</li><li>依赖：运行时依赖 &amp; 开发时依赖</li><li>可执行脚本</li></ol></section></section><section><h2 id="2-stylus">2. 配置 Stylus</h2></section><section><h3 id="3-html">3. 开发静态 HTML</h3></section><section><h3 id="-">实战：手机日历组件 第二讲</h3><h1 id="es6-">ES6 &amp; 测试</h1><h4 id="-meathill-https-weibo-com-meathill-"><a href="https://weibo.com/meathill/">@meathill</a></h4></section><section><p>{{&gt; author}}</p></section><section><h2 id="-">课程大纲</h2><ol><li>ES2015（ES6）简介</li><li>Webpack + Babel 配置</li><li>使用 ES6 开发 JavaScript</li><li>使用 Mocha + should.js 测试</li></ol></section><section><h3 id="-">教学目标</h3><h2 id="1-es2015">1. 了解 ES2015</h2><ol><li><code>let</code> 和 <code>const</code></li><li>变量解构</li><li>箭头函数</li><li><code>Class</code> 和 <code>Module</code></li><li>模板字符串</li></ol></section><section><h2 id="2-">2. 了解测试</h2><ol><li>为什么要写测试？</li><li>什么是单元测试？怎么写？</li><li>怎么开始写测试？</li></ol></section><section><h2 id="3-">3. 测试驱动开发</h2></section><section><section><h2 id="-es2015">了解 ES2015</h2></section><section><p>ES</p><p>= ECMAScript</p><p>= 由 ECMA 国际（前身为欧洲计算机制造商协会）通过 ECMA-262标准化的脚本程序设计语言。</p></section><section><ul><li>JavaScript 是 ECMAScript 的一种方言</li><li>JavaScript 增加了 DOM 和 BOM</li><li>目前通行的是 ES5，主流浏览器部分或全部支持 ES6</li></ul></section><section><ul><li>ES5 = ES6 之前的规范</li><li>ES6 = ES2015</li><li>ES7 = ES2016 + ES2017</li><li>ES8 = ES2018（讨论中）</li><li>ES9 = ES2019（征集想法中）</li></ul></section></section><section><section><h2 id="javascript-">JavaScript 的历史</h2></section><section><h3 id="-">妾本出身贫寒家，未想尊威仪天下</h3><ol><li>为校验表单而生</li><li>只花了10天就设计出原型</li><li>连名字都是山寨的……</li></ol></section><section><h3 id="-">江山代有才人出，各领风骚数百年</h3><ol><li>JScript</li><li>Flash，ActionX</li><li>SilverLight，JavaFX</li></ol></section><section><h3 id="-">天下逐鹿，终归秦属</h3><ol><li>ES3 大体上统一了 JavaScript</li><li>ES4 夭折</li><li>HTML5 获得浏览器之争的最终胜利</li><li>ES5 诞生</li><li>ES6 诞生</li></ol></section></section><section><blockquote><p>ES2015 增加了很多优秀的新特性，可以让我们开发出更强壮，更好维护的代码。</p><p>以后的开发，都应当以 ES2015 为基础。</p></blockquote></section><section><h2 id="es2015-">ES2015 新特性</h2></section><section><h3 id="-let-const-"><code>let</code> &amp; <code>const</code></h3><ol><li>声明变量 <code>let a = 1;</code></li><li>声明常量 <code>let B = 2;</code></li><li>块级作用域 <a href="./sample/let-const.js">code</a></li><li>没有变量提升 <a href="./sample/let-const-2.js">code</a></li></ol></section><section><section><h3 id="-">变量解构</h3><ol><li>解构数组 <code>let [a, b, c] = [1, 2, 3];</code></li><li>数组拆分 <code>let [a, ...b] = [1, 2, 3, 4];</code></li><li>解构对象 <code>let {a, b, c} = {a: 1, b: 2, c: 3};</code></li></ol></section><section><p>常见用法：函数返回多个值</p><pre><code class="lang-javascript">function sample() {
  return {
    a: 1,
    b: 2,
    c: 3
  };
}
let {a, b, c} = sample();
</code></pre></section><section><p>常见用法：作为函数参数</p><pre><code class="lang-javascript">function sample({id, name, age, sex, height, photo}) {
  // do something
}
sample({
  id: 1,
  name: &#39;meathill&#39;,
  age: 33,
  sex: MALE,
  height: 181,
  photo: &#39;./photo.jpg&#39;
})
</code></pre></section></section><section><h3 id="-">箭头函数</h3><pre><code class="lang-javascript">let func = (p1, p2) =&gt; {
  // do something
}
</code></pre><ul><li>箭头函数的 <code>this</code> 固定指向声明它的对象</li></ul></section><section><section><h3 id="class">Class</h3><pre><code class="lang-javascript">class A {
  constructor() {
    // 构造函数

    // 声明实例属性
    this.var1 = &#39;&#39;;
  }

  method1() {

  }

  method2() {

  }
}
</code></pre></section><section><p>几个常见的点：</p><ol><li>这里的类仍然是原型继承</li><li><code>class</code> 关键词不存在变量提升</li><li>子类构造函数里，必须 <code>super()</code> 之后才有 <code>this</code></li></ol></section></section><section><section><h3 id="module">Module</h3><p>终于有模块机制了！</p><pre><code class="lang-javascript">// profile.js
export let name = &#39;Meathill&#39;;
export let age = 33;
export let weight = 100;

// user.js
import {name, age, weight} from &#39;./profile.js&#39;
</code></pre></section><section><p>默认值</p><pre><code class="lang-javascript">// profile.js
export default name = &#39;Meathill&#39;;
export let age = 33;
export let weight = 100;

// user.js
import anyname from &#39;./profile.js&#39;;
</code></pre></section></section><section><h3 id="-">模板字符串</h3><pre><code class="lang-javascript">let name = &#39;Meathill&#39;;
let age = 33;
let favor = &#39;Gakki&#39;;

alert(`Hi, I&#39;m ${name}，I&#39;m ${age}, I like ${favor}`);
// Hi, I&#39;m Meathill, I&#39;m 33, I like Gakki
</code></pre><ol><li>支持 <code>.</code> 运算符，如 <code>Hi, ${user.name}</code></li><li>支持换行</li></ol></section><section><h2 id="-">测试与单元测试</h2></section><section><section><h3 id="-">我对测试的态度</h3><ol><li>开发人员必须了解测试</li><li>开发人员应该自己写测试</li><li>小公司不需要配置专门测试</li></ol></section><section><h3 id="-">为什么要写测试？</h3><ol><li>稳定质量</li><li>方便重构</li><li>提升开发效率</li></ol></section><section><h3 id="-">什么是单元测试？</h3><blockquote><p>在计算机编程中，单元测试（英语：Unit Testing）又称为模块测试, 是针对程序模块（软件设计的最小单位）来进行正确性检验的测试工作。 程序单元是应用的最小可测试部件。</p></blockquote></section><section><h3 id="-">怎么写单元测试？</h3><p>以 Node.js 为例</p><pre><code class="lang-javascript">const assert = require(&#39;assert&#39;);

assert.equal(1, &#39;1&#39;); // 1 == &#39;1&#39; true
</code></pre></section><section><p>核心概念：</p><ol><li>断言</li><li>边界条件</li></ol></section></section><section><h3 id="-">怎么开始写单元测试？</h3><ol><li>如果要重构，先写测试</li><li>比较重要的操作，先写测试</li><li>项目进度相对宽松，先写测试</li></ol><blockquote><p>总之，测试不嫌少，能写赶紧写。</p></blockquote></section><section><h2 id="-">测试驱动开发</h2><ol><li>Test Driven Development</li><li>先想怎么用，而不是先想怎么写</li><li>适用于前期规划项目</li></ol></section><section><p>Q&amp;A</p></section><section><p>完整项目代码仓库：</p><ul><li><a href="https://github.com/meathill-freelance/date-picker">Github meathill-freelance/date-picker</a></li><li><a href="https://meathill-freelance.github.io/data-picker/">线上文档</a></li></ul></section><section><p>参考阅读：</p><ul><li><a href="https://docs.npmjs.com/getting-started/using-a-package.json">Using a package.json</a></li><li><a href="http://stylus-lang.com/">Stylus</a></li><li><a href="http://es6.ruanyifeng.com">ES6</a></li><li><a href="https://zh.wikipedia.org/wiki/ECMAScript">Wiki ECMAScript</a></li></ul></section>
  </div>
</div>
<script src="//cdn.staticfile.org/reveal.js/3.4.1/lib/js/head.min.js"></script>
<script src="//cdn.staticfile.org/reveal.js/3.4.1/js/reveal.min.js"></script>
<script src="./app/main.js"></script>
</body>
</html>